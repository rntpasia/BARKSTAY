<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="chatbotstyle.css">
    <!-- Google Fonts Link For Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
    <script src="chatbotscript.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="chatbotstyle.css">
    <!-- Google Fonts Link For Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
    <script src="chatbotscript.js" defer></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: white;
        }
        
        header {
            background-color: #0f172a;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .profile {
            display: flex;
            align-items: center;
        }
        .profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .dashboard, .reviews {
            background-color: white;
            color: white;
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
        }
        
        .dashboard h2, .reviews h2 {
            text-align: center;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .card {
            background-color: #002244;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        /* Card Icons */
        .card-icon {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        /* Enlarged & Bold Text for Specific Words */
        .card p strong {
             font-size: 24px;
             font-weight: bold;
        }
        
        .review-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .review-column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .review-card {
            background-color: #002244;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            width: 90%;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .review-profile {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            width: 100%;
        }
        
        .review-profile img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .review-profile span {
            font-weight: bold;
            font-size: 14px;
        }
        
        .review-text {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Star color styling */
        .fa-star, .fa-star-o {
            color: gold;
            margin-left: 5px;
        }
        
        /* Review navigation buttons */
        .review-buttons {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
        
        .review-buttons button {
             background-color: #002244;
             border: none;
             color: white;
             font-size: 24px;
             cursor: pointer;
             margin: 0 5px;
             width: 40px;
             height: 40px;
             border-radius: 50%;
             display: flex;
             align-items: center;
             justify-content: center;
        }
        
        .review-btn {
            display: block;
            margin: 20px auto;
            background-color: #002244;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .bottom-nav {
    display: flex;
    justify-content: space-around;
    align-items: center;
    background: #0A192F;
    padding: 15px 0;
    color: white;
    width: 100%;
    position: fixed; /* Change from absolute to fixed */
    bottom: 0;
    left: 0;
    z-index: 1000; /* Ensure it stays above other elements */
}

/* Add padding-bottom to .container to avoid content getting hidden */
.container {
    padding-bottom: 80px; /* Adjust based on nav height */
    overflow-y: auto;
}

        .nav-item {
            text-align: center;
            flex: 1;
            cursor: pointer;
            padding: 10px 0;
            transition: background 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .nav-item i {
            font-size: 24px;
            margin-bottom: 5px;
        }
        .nav-item.active {
            background: #B0C4DE;
            color: #0A192F;
            border-radius: 5px;
        }
        .chat-header {
            background: #0A192F;
            color: white;
            padding: 15px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .header-content {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
       
        .user-info .text {
    display: flex;
    flex-direction: column;
}

.user-info .text .bold {
    font-weight: bold;
    font-size: 16px;
}

.user-info .text span {
    font-size: 14px;
}

.user-info {
    display: flex;
    align-items: center;
}

.user-avatar {
    width: 35px;
    height: 35px;
    background-color: #ccc;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    text-align: center;
    margin-right: 10px;
}

        .label-container {
            text-align: center;
            background-color: #002244;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .loading {
            color: #ccc;
            font-style: italic;
        }

        .refresh-btn {
            display: block;
            margin: 10px auto;
            background-color: #002244;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .refresh-btn:hover {
            background-color: #003366;
        }

        .last-updated {
            text-align: center;
            color: #666;
            font-size: 12px;
            margin-top: 10px;
        }

        .count-display {
            font-size: 16px;
            margin-top: 5px;
            opacity: 0.8;
        }

.modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            text-align: center;
        }
        .stars {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        .stars i {
            font-size: 24px;
            color: gray;
            cursor: pointer;
        }
        .stars i.active {
            color: gold;
        }
        .review-text {
            width: 100%;
            height: 80px;
            margin-bottom: 10px;
        }
        .modal-buttons {
            display: flex;
            justify-content: space-between;
        }
        .modal-buttons button {
            padding: 10px;
            border: none;
            cursor: pointer;
        }
        .submit-btn {
            background-color: #002244;
            color: white;
            border-radius: 5px;
        }
        .cancel-btn {
            background-color: gray;
            color: white;
            border-radius: 5px;
        }
        .review-btn {
            display: block;
            margin: 20px auto;
            background-color: #002244;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                text-align: center;
                padding: 15px;
            }
            
            .grid, .review-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .review-card, .card {
                width: 90%;
                max-width: 400px;
                padding: 20px;
                margin: 10px auto;
                border-radius: 12px;
                box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
            }
            
            .dashboard, .reviews {
                margin: 15px;
                padding: 20px;
            }
            
            .review-btn {
                display: block;
                width: 90%;
                max-width: 300px;
                margin: 20px auto;
                padding: 12px;
                font-size: 18px;
                text-align: center;
            }
        }
        
        @media (max-width: 480px) {
            .nav {
                padding: 15px 0;
            }
            
            .nav button {
                font-size: 14px;
            }
            
            .dashboard, .reviews {
                margin: 10px;
                padding: 15px;
            }
            
            .review-card, .card {
                padding: 15px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="chat-header">
            <div class="header-content">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user" style="font-size: 20px;"></i>
                    </div>
                <div>
                    <div class="text">
                        <span><div id="user_name"></div></span>
                        <span class="bold" onclick="navigateTo('manage.html')">Manage Account</span>
                    </div>
                </div>
            </div>
           </div>
        </div>

        <section class="dashboard">
            <div class="label-container">
                <h2>Real-time Feedback Dashboard</h2>
            </div>
            <button class="refresh-btn" onclick="fetchDashboardData()">
                <i class="fa fa-refresh"></i> Refresh Data
            </button>
            <div class="grid">
                <div class="card">
                    <div class="card-icon"><i class="fa fa-bar-chart"></i></div>
                    <h3>Most Serviced Breed</h3>
                    <p><strong id="most-breed">Loading...</strong></p>
                    <p class="count-display" id="breed-count">-</p>
                    <p id="breed-trend"><i class="fa fa-refresh loading"></i> Calculating...</p>
                </div>
                <div class="card">
                    <div class="card-icon"><i class="fa fa-building"></i></div>
                    <h3>Most Availed Hotel</h3>
                    <p><strong id="most-hotel">Loading...</strong></p>
                    <p class="count-display" id="hotel-count">-</p>
                    <p id="hotel-trend"><i class="fa fa-refresh loading"></i> Calculating...</p>
                </div>
            </div>
            <div class="last-updated" id="last-updated">Last updated: Never</div>
        </section>

    </div>

    <script type="module">
        import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

        // Initialize Supabase with your credentials
        const SUPABASE_URL = "https://cwqhiwfmiymomtxgycwx.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN3cWhpd2ZtaXltb210eGd5Y3d4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIxNTA3ODcsImV4cCI6MjA1NzcyNjc4N30.1fpWjVox5v2dAGM-MxXihwzdeuOb_Yxm-0Lr0Z8yLoU";

        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        console.log("‚úÖ Dashboard script loaded!");

        // Sample hotel data (you can later connect this to a hotels table)
        const hotels = [
             "Adorafur Happy Stay",
   "Lara's Ark",
   "Dluxe Pet Hotel and Spa",
   "Haily's Pet Boarding",
   "Pet Starz",
   "Paw House PH",
   "Mr. Paws PH",
   "Happy Paws",
   "My Pet Space",
   "The Golden Fur",
   "Abby's Paws n' Play",
   "Amazing Pets",
   "Paws and Fur White Plains",
   "Snow Angels Pet Hub",
   "Elite Paws",
   "Furmont Pet Hotel",
            "Barkin Bubbles"
        ];

        let previousData = {
            mostBreed: null,
            breedCount: 0,
            mostHotel: null,
            hotelCount: 0
        };

        // Function to get a random hotel (simulate hotel bookings)
        function getRandomHotel() {
            return hotels[Math.floor(Math.random() * hotels.length)];
        }

        // Function to calculate percentage change
        function calculatePercentageChange(current, previous) {
            if (previous === 0) return current > 0 ? 100 : 0;
            return Math.round(((current - previous) / previous) * 100);
        }

        // Function to fetch and analyze dashboard data
        async function fetchDashboardData() {
            try {
                console.log("üîÑ Fetching dashboard data...");
                
                // Show loading state
                document.getElementById('most-breed').textContent = 'Loading...';
                document.getElementById('most-hotel').textContent = 'Loading...';
                document.getElementById('breed-count').textContent = '-';
                document.getElementById('hotel-count').textContent = '-';

                // Fetch all pets from the database
                const { data: pets, error } = await supabase
                    .from('pets')
                    .select('breed')
                    .order('id', { ascending: false });

                if (error) {
                    console.error("‚ùå Error fetching pets:", error.message);
                    document.getElementById('most-breed').textContent = 'Error loading';
                    document.getElementById('breed-trend').innerHTML = '<i class="fa fa-exclamation-triangle"></i> Error loading data';
                    return;
                }

                console.log("‚úÖ Pets data fetched:", pets);

                // Analyze breed data
                const breedCounts = {};
                let totalPets = 0;

                pets.forEach(pet => {
                    if (pet.breed) {
                        breedCounts[pet.breed] = (breedCounts[pet.breed] || 0) + 1;
                        totalPets++;
                    }
                });

                // Find most popular breed
                let mostPopularBreed = 'No data';
                let highestCount = 0;

                Object.entries(breedCounts).forEach(([breed, count]) => {
                    if (count > highestCount) {
                        highestCount = count;
                        mostPopularBreed = breed;
                    }
                });

                // Calculate breed percentage change
                const breedPercentChange = calculatePercentageChange(highestCount, previousData.breedCount);
                const breedTrendIcon = breedPercentChange >= 0 ? 'fa-arrow-up' : 'fa-arrow-down';
                const breedTrendColor = breedPercentChange >= 0 ? '#4CAF50' : '#f44336';

                // Update breed display
                document.getElementById('most-breed').textContent = mostPopularBreed;
                document.getElementById('breed-count').textContent = `${highestCount} pets registered`;
                document.getElementById('breed-trend').innerHTML = 
                    `<i class="fa ${breedTrendIcon}" style="color: ${breedTrendColor}"></i> ${Math.abs(breedPercentChange)}% from last refresh`;

                // Simulate hotel data (in a real app, this would come from bookings/reservations table)
                const randomHotel = getRandomHotel();
                const simulatedHotelCount = Math.floor(Math.random() * 50) + 10; // Random count between 10-59
                
                // Calculate hotel percentage change
                const hotelPercentChange = calculatePercentageChange(simulatedHotelCount, previousData.hotelCount);
                const hotelTrendIcon = hotelPercentChange >= 0 ? 'fa-arrow-up' : 'fa-arrow-down';
                const hotelTrendColor = hotelPercentChange >= 0 ? '#4CAF50' : '#f44336';

                // Update hotel display
                document.getElementById('most-hotel').textContent = randomHotel;
                document.getElementById('hotel-count').textContent = `${simulatedHotelCount} bookings`;
                document.getElementById('hotel-trend').innerHTML = 
                    `<i class="fa ${hotelTrendIcon}" style="color: ${hotelTrendColor}"></i> ${Math.abs(hotelPercentChange)}% from last refresh`;

                // Store current data for next comparison
                previousData = {
                    mostBreed: mostPopularBreed,
                    breedCount: highestCount,
                    mostHotel: randomHotel,
                    hotelCount: simulatedHotelCount
                };

                // Update last updated time
                const now = new Date();
                document.getElementById('last-updated').textContent = 
                    `Last updated: ${now.toLocaleTimeString()}`;

                console.log("‚úÖ Dashboard updated successfully!");

            } catch (error) {
                console.error("‚ùå Error updating dashboard:", error);
                document.getElementById('most-breed').textContent = 'Error';
                document.getElementById('most-hotel').textContent = 'Error';
            }
        }

        // Make fetchDashboardData available globally
        window.fetchDashboardData = fetchDashboardData;

        // Fetch data on page load
        document.addEventListener('DOMContentLoaded', fetchDashboardData);

        // Auto-refresh every 30 seconds
        setInterval(fetchDashboardData, 30000);

        console.log("üöÄ Real-time dashboard initialized!");
    </script>

</body>
</html>

<!-- Reviews Section -->
<section class="reviews">
    <div class="label-container">
        <h2>Reviews</h2>
    </div>

    <div class="review-grid">
        <!-- Column 1 -->
        <div class="review-column">
            <div class="review-card" id="review1-1">
                <div class="review-profile">
                    <img src="images/profile.jpg" alt="User 1">
                    <span>@dogmom23</span>
                </div>
                <div class="review-text">The service was excellent <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></div>
            </div>
            <div class="review-card" id="review1-2">
                <div class="review-profile">
                    <img src="images/profile.jpg" alt="User 2">
                    <span>@petlover</span>
                </div>
                <div class="review-text">Staff was friendly <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star-o"></i></div>
            </div>
            <div class="review-buttons">
                <button onclick="prevReview(1)"><i class="fa fa-chevron-left"></i></button>
                <button onclick="nextReview(1)"><i class="fa fa-chevron-right"></i></button>
            </div>
        </div>
        <!-- Column 2 -->
        <div class="review-column">
            <div class="review-card" id="review2-1">
                <div class="review-profile">
                    <img src="images/profile.jpg" alt="User 3">
                    <span>@barkbuddy</span>
                </div>
                <div class="review-text">Seems like my dog enjoyed her stay <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star-o"></i></div>
            </div>
            <div class="review-card" id="review2-2">
                <div class="review-profile">
                    <img src="images/profile.jpg" alt="User 4">
                    <span>@pawsitive</span>
                </div>
                <div class="review-text">Clean environment <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></div>
            </div>
            <div class="review-buttons">
                <button onclick="prevReview(2)"><i class="fa fa-chevron-left"></i></button>
                <button onclick="nextReview(2)"><i class="fa fa-chevron-right"></i></button>
            </div>
        </div>
        <!-- Column 3 -->
        <div class="review-column">
            <div class="review-card" id="review3-1">
                <div class="review-profile">
                    <img src="images/profile.jpg" alt="User 5">
                    <span>@woofworld</span>
                </div>
                <div class="review-text">Great hotel service <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></div>
            </div>
            <div class="review-card" id="review3-2">
                <div class="review-profile">
                    <img src="images/profile.jpg" alt="User 6">
                    <span>@furmom</span>
                </div>
                <div class="review-text">Highly recommended <i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star-o"></i></div>
            </div>
            <div class="review-buttons">
                <button onclick="prevReview(3)"><i class="fa fa-chevron-left"></i></button>
                <button onclick="nextReview(3)"><i class="fa fa-chevron-right"></i></button>
            </div>
        </div>
    </div>
    <button class="review-btn" onclick="openReviewModal()">Add A Review</button>

<div id="reviewModal" class="modal">
    <div class="modal-content">
        <h3>Leave a Review</h3>
        <div class="stars">
            <i class="fa fa-star" data-rating="1"></i>
            <i class="fa fa-star" data-rating="2"></i>
            <i class="fa fa-star" data-rating="3"></i>
            <i class="fa fa-star" data-rating="4"></i>
            <i class="fa fa-star" data-rating="5"></i>
        </div>
        <textarea class="addareview-text" placeholder="Write your review..."></textarea>
        <div class="modal-buttons">
            <button class="cancel-btn" onclick="closeReviewModal()">Cancel</button>
            <button class="submit-btn" onclick="submitReview()">Submit</button>
        </div>
    </div>
</div>
</section>

<!-- Chat Button -->
<button class="chatbot-toggler">
    <span class="material-symbols-rounded">smart_toy</span>
    <span class="material-symbols-outlined">close</span>
  </button>
  <div class="chatbot">
    <header>
      <h2>Chatbot</h2>
      <span class="close-btn material-symbols-outlined">close</span>
    </header>
    <ul class="chatbox">
      <li class="chat incoming">
        <span class="material-symbols-outlined">smart_toy</span>
        <p>Hi there <br>How can I help you today?</p>
      </li>
    </ul>
    <div class="chat-input">
      <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>
      <span id="send-btn" class="material-symbols-rounded">send</span>
    </div>
  </div>

  <div class="bottom-nav">
    <div class="nav-item" id="home" onclick="navigateTo('home.html')">
        <i class="fas fa-paw"></i>
        <span>Home</span>
    </div>
    <div class="nav-item" id="mapTab" onclick="navigateTo('maps.html')">
        <i class="fas fa-map-marker-alt"></i>
        <span>Map</span>
    </div>
    <div class="nav-item" id="chat" onclick="navigateTo('Chat.html')">
        <i class="fas fa-comment"></i>
        <span>Chat</span>
    </div>
    <div class="nav-item active" id="review" onclick="navigateTo('reviews.html')">
        <i class="fas fa-bone"></i>
        <span>Review</span>
    </div>
</div>
</div>
<script>
    const reviewUsers = [
        ["@dogmom23", "@petlover", "@puppylove"],
        ["@barkbuddy", "@pawsitive", "@k9fan"],
        ["@woofworld", "@furmom", "@doggodad"]
    ];
    
    const reviews = [
        ["The service was excellent &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i>", 
         "Staff was friendly &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star-o\"></i>", 
         "Amazing care &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i>"],
        ["Seems like my dog enjoyed her stay &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star-o\"></i>", 
         "Clean environment &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i>", 
         "Very professional &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i>"],
        ["Great hotel service &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i>", 
         "Highly recommended &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star-o\"></i>", 
         "Loved it! &nbsp;<i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i><i class=\"fa fa-star\"></i>"]
    ];

    let indices = [0, 0, 0];

    function nextReview(col) {
        indices[col - 1] = (indices[col - 1] + 1) % 3;
        updateReviews(col);
    }

    function prevReview(col) {
        indices[col - 1] = (indices[col - 1] - 1 + 3) % 3;
        updateReviews(col);
    }

    function updateReviews(col) {
        const currentIndex = indices[col - 1];
        const nextIndex = (currentIndex + 1) % 3;
        
        const review1 = document.getElementById(`review${col}-1`);
        const review2 = document.getElementById(`review${col}-2`);
        
        review1.innerHTML = `
            <div class="review-profile">
                <img src="images/profile.jpg" alt="User">
                <span>${reviewUsers[col-1][currentIndex]}</span>
            </div>
            <div class="review-text">${reviews[col-1][currentIndex]}</div>
        `;
        
        review2.innerHTML = `
            <div class="review-profile">
                <img src="images/profile.jpg" alt="User">
                <span>${reviewUsers[col-1][nextIndex]}</span>
            </div>
            <div class="review-text">${reviews[col-1][nextIndex]}</div>
        `;
    }

    function openChat() {
        alert("Chat functionality would open here");
    }
    document.addEventListener("DOMContentLoaded", function () {
    const modal = document.getElementById("reviewModal");
    const stars = document.querySelectorAll(".stars i");
    const reviewTextarea = document.querySelector(".addareview-text");

    function openReviewModal() {
        modal.style.display = "flex"; // Ensure modal is visible
    }

    function closeReviewModal() {
        modal.style.display = "none"; // Hide modal
        resetStars(); // Reset stars when closing
        reviewTextarea.value = ""; // Clear input field
    }

    function submitReview() {
        const reviewText = reviewTextarea.value.trim();
        const rating = document.querySelectorAll(".stars i.active").length;

        if (rating === 0 || reviewText === "") {
            alert("Please provide a rating and a review.");
            return;
        }

        alert(`Review Submitted!\nRating: ${rating} stars\nReview: ${reviewText}`);
        closeReviewModal();
    }

    function resetStars() {
        stars.forEach(star => star.classList.remove("active"));
    }

    function handleStarClick(event) {
        const rating = parseInt(event.target.getAttribute("data-rating"));
        stars.forEach((star, index) => {
            star.classList.toggle("active", index < rating);
        });
    }

    stars.forEach(star => {
        star.addEventListener("click", handleStarClick);
    });

    document.querySelector(".review-btn").addEventListener("click", openReviewModal);
    document.querySelector(".cancel-btn").addEventListener("click", closeReviewModal);
    document.querySelector(".submit-btn").addEventListener("click", submitReview);

    // Close modal when clicking outside modal-content
    modal.addEventListener("click", function (event) {
        if (event.target === modal) {
            closeReviewModal();
        }
    });
});
function navigateTo(page) {
                window.location.href = page; // Redirect to the specified page
            }
        
            // Highlight the active tab based on the current page
            document.addEventListener("DOMContentLoaded", function () {
                const currentPage = window.location.pathname.split("/").pop(); // Get the current filename
                const navItems = document.querySelectorAll(".nav-item");
        
                navItems.forEach(item => {
                    if (item.getAttribute("onclick").includes(currentPage)) {
                        item.classList.add("active"); // Add active class
                    } 
                });
            });


</script>
<script type="module" src="home-page.js"></script>

</body>
</html>



