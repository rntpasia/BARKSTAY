<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. Paws</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="hotelstyle.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="user-profile">
            <div class="user-avatar">
                <img src="/api/placeholder/40/40" alt="User">
            </div>
            <div class="user-info">
                <span class="username">@username</span>
                <span class="bold" onclick="navigateTo('manage.html')" style="cursor: pointer;">Manage Account</span>
            </div>
        </div>
        <div class="header-icons">
            <button class="icon-button"><i class="fas fa-cog"></i></button>
            <button class="icon-button"><i class="fas fa-question-circle"></i></button>
        </div>
    </div>
    
    <img src="images/g.jpg" alt="Hotel" class="banner-img">
    
    <div class="hotel-title">
        <div>
            <h1 class="hotel-name">Mr. Paws</h1>
            <p class="hotel-address">Kalayaan, Makati</p>
        </div>
        <div class="chat-icon">
            <i class="fas fa-comment"></i>
        </div>
    </div>
   <!-- Universal Booking Form -->
<div class="booking-container">
  <div class="booking-header">
    <div class="booking-title">Book Your Stay</div>
    <div class="booking-subtitle">Reserve the perfect room for your furry friend</div>
  </div>

  <form id="bookingForm" action="manage-book.html" method="get" class="booking-form">
    <!-- Date Selection Row -->
    <div class="form-row">
      <div class="form-group">
        <label class="form-label" for="check-in">
          <i class="fas fa-calendar-alt"></i> Check In
        </label>
        <input type="date" id="check-in" class="form-input" required>
      </div>

      <div class="form-group">
        <label class="form-label" for="check-out">
          <i class="fas fa-calendar-alt"></i> Check Out
        </label>
        <input type="date" id="check-out" class="form-input" required>
      </div>
    </div>

    <!-- Room and Pet Details Row -->
    <div class="form-row">
      <div class="form-group">
        <label class="form-label" for="room-number">
          <i class="fas fa-door-open"></i> # of Rooms
        </label>
        <select id="room-number" class="form-select" required>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label" for="room-type">
          <i class="fas fa-bed"></i> Room Type
        </label>
        <select id="room-type" class="form-select" required>
            <option value="Standard">Standard - ₱1,000/night</option>
            <option value="Deluxe">Deluxe - ₱1,400/night</option>
            <option value="Suite">Suite - ₱2,000/night</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label" for="num-pets">
          <i class="fas fa-paw"></i> # of Pets
        </label>
        <input type="number" id="num-pets" class="form-input" min="0" max="5" value="0" required>
      </div>
    </div>
            <!-- Price Display -->
        <div class="price-display" id="price-display" style="display: none;">
            <div class="price-label">Total Amount</div>
            <div class="price-amount" id="total-amount">₱0</div>
            <div class="price-breakdown" id="price-breakdown"></div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="confirm-button">
            <i class="fas fa-paw"></i> Confirm Booking
        </button>
            
  </form>
</div>



    <!-- Facilities Section -->
    <div class="section">
        <h2 class="section-title">Facilities Available</h2>
        <div class="facilities-grid">
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Boarding Areas</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Outdoor Play Areas</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Training Areas</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Luxury Suites</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Pool</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Grooming Stations</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Indoor Play Areas</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Veterenary Care Areas</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Feeding Areas</span>
            </div>
        </div>
    </div>
    
    <!-- Services Section -->
    <div class="section">
        <h2 class="section-title">Services Offered</h2>
        <div class="facilities-grid">
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Boarding</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Exercise and Playtime</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Grooming</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Feeding</span>
            </div>
            <div class="facility-item">
                <i class="fas fa-check"></i>
                <span>Supervision and Care</span>
            </div>
        </div>
    </div>
    
    <!-- Reviews Section -->
    <div class="section">
        <h2 class="section-title">Reviews</h2>
        <div class="review-summary">
            <span class="review-score">4.6</span>
            <div class="review-stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
            </div>
            <div class="reviewer">
                <img src="images/profilee.png" alt="Reviewer" class="reviewer-img">
                <span class="reviewer-name">ihateriella</span>
            </div>            
        </div>
    </div>
    
   <!-- Location Section -->
<div class="section">
    <h2 class="section-title">View Location</h2>
    <div class="location-map">
        <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3861.229095037266!2d121.07763527492375!3d14.586017585898626!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3397c724a0115659%3A0x2777cdcdcec21d08!2sMr.%20Paws%20Pet%20Care%20Grooming%20%26%20Hotel!5e0!3m2!1sen!2sph!4v1742124284136!5m2!1sen!2sph" 
            width="100%" 
            height="450" 
            style="border:0;" 
            allowfullscreen 
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade">
        </iframe>
    </div>
</div>

    
 
    <!-- Rooms Section -->
    <section class="section">
        <h2 class="section-title">Rooms</h2>
        <div class="rooms-grid">
            <div class="room-card">
                <img src="images/c.jpg" alt="The Bark Lounge Deluxe Room" class="room-img">
                <div class="room-details">
                    <div class="room-name">The Bark Lounge</div>
                    <div class="room-subtitle">Deluxe</div>
                </div>
            </div>
            <div class="room-card">
                <div class="room-img"></div>
                <div class="room-details">
                    <div class="room-name">Paw Suite</div>
                    <div class="room-subtitle">Suite</div>
                </div>
            </div>
            <div class="room-card">
                <div class="room-img"></div>
                <div class="room-details">
                    <div class="room-name">Cozy Den</div>
                    <div class="room-subtitle">Standard</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Hotel Policies Section -->
    <section class="section">
        <h2 class="section-title">Hotel Policies</h2>
        <div class="policies-content">
            <p><strong>Check-in:</strong> 2:00 PM - 8:00 PM</p>
            <p><strong>Check-out:</strong> 8:00 AM - 12:00 PM</p>
            <p><strong>Pet Requirements:</strong> All pets must be up-to-date on vaccinations</p>
            <p><strong>Cancellation:</strong> 24 hours notice required</p>
            <p><strong>Payment:</strong> Full payment required upon check-in</p>
        </div>
    </section>

<script>
const ROOM_PRICING = {
    "Standard": 1000,
    "Deluxe": 1400,
    "Suite": 2000
};

document.addEventListener('DOMContentLoaded', function() {
    initializeForm();
});

function initializeForm() {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('check-in').min = today;
    document.getElementById('check-out').min = today;
    
    // Bind events for real-time price calculation
    ['check-in', 'check-out', 'room-number', 'room-type', 'num-pets'].forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            element.addEventListener('change', calculatePrice);
        }
    });
    
    // Update check-out minimum date when check-in changes
    document.getElementById('check-in').addEventListener('change', function(e) {
        const checkInDate = new Date(e.target.value);
        const nextDay = new Date(checkInDate);
        nextDay.setDate(nextDay.getDate() + 1);
        document.getElementById('check-out').min = nextDay.toISOString().split('T')[0];
        calculatePrice();
    });
}

function calculatePrice() {
    const checkIn = document.getElementById('check-in').value;
    const checkOut = document.getElementById('check-out').value;
    const numRooms = parseInt(document.getElementById('room-number').value) || 0;
    const roomType = document.getElementById('room-type').value;
    const numPets = parseInt(document.getElementById('num-pets').value) || 0;

    // Hide price display if required fields are missing
    const priceDisplay = document.getElementById('price-display');
    if (!checkIn || !checkOut || !numRooms || !roomType) {
        if (priceDisplay) priceDisplay.style.display = 'none';
        return;
    }

    const checkInDate = new Date(checkIn);
    const checkOutDate = new Date(checkOut);
    const diffTime = checkOutDate - checkInDate;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

    // Hide price display if dates are invalid
    if (diffDays < 1) {
        if (priceDisplay) priceDisplay.style.display = 'none';
        return;
    }

    // Calculate total price
    const pricePerNight = ROOM_PRICING[roomType] || 1400;
    const totalAmount = diffDays * numRooms * pricePerNight;

    // Update price display
    const totalAmountElement = document.getElementById('total-amount');
    const priceBreakdownElement = document.getElementById('price-breakdown');
    
    if (totalAmountElement) {
        totalAmountElement.textContent = `₱${totalAmount.toLocaleString()}`;
    }
    
    if (priceBreakdownElement) {
        priceBreakdownElement.textContent = 
            `${diffDays} night${diffDays > 1 ? 's' : ''} × ${numRooms} room${numRooms > 1 ? 's' : ''} × ₱${pricePerNight.toLocaleString()}/night`;
    }
    
    if (priceDisplay) {
        priceDisplay.style.display = 'block';
    }
}

document.getElementById("bookingForm").addEventListener("submit", function(e) {
    e.preventDefault(); // ✅ always prevent default so you control what happens next

    // Get values
    const checkIn = new Date(document.getElementById("check-in").value);
    const checkOut = new Date(document.getElementById("check-out").value);
    const numRooms = parseInt(document.getElementById("room-number").value) || 0;
    const roomType = document.getElementById("room-type").value;
    const numPets = parseInt(document.getElementById("num-pets").value) || 0;

    // Enhanced validation
    if (isNaN(checkIn.getTime()) || isNaN(checkOut.getTime())) {
        alert("Please select valid check-in and check-out dates.");
        return;
    }

    const diffTime = checkOut - checkIn;
    const diffDays = diffTime / (1000 * 60 * 60 * 24);

    if (diffDays < 1) {
        alert("Check-out must be at least one day after check-in.");
        return;
    }

    if (numRooms < 1) {
        alert("Please select at least one room.");
        return;
    }

    if (numPets < 1) {
        alert("Please specify at least 1 pet.");
        return;
    }

    // Enhanced price calculation using room type pricing
    const pricePerNight = ROOM_PRICING[roomType] || 1400;
    const totalPrice = diffDays * numRooms * pricePerNight;

    // Build booking data object
    const bookingData = {
        hotel_id: "5c8735bb-ca04-493f-ae3a-0f559b6a7d1d", 
        check_in: checkIn.toISOString().split('T')[0],
        check_out: checkOut.toISOString().split('T')[0],
        num_rooms: numRooms,
        room_type: roomType,
        num_pets: numPets,
        total_nights: diffDays,
        price_per_night: pricePerNight,
        total_amount: totalPrice
    };

    console.log("✅ Booking data saved to localStorage:", bookingData);

    localStorage.setItem("bookingData", JSON.stringify(bookingData));

    window.location.href = "manage-book.html";
});
</script>

</body>
</html>
